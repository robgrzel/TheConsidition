(function(){"use strict";window.app=function(){var n=function(n){for(var u=n.split("."),t=window,i="",r=0,f=u.length;r<f;r++)i=u[r],t[i]=t[i]||{},t=t[i];return t};return{namespace:n}}()})(),function(n){"use strict";var t=app.namespace("app.service");t.Ajax=function(){};t.Ajax.prototype.init=function(){};t.Ajax.prototype.postAsync=function(t,i){return n.ajax({method:"POST",url:t,data:i,cache:!1})};t.Ajax.prototype.getAsync=function(t,i){return n.ajax({method:"GET",url:t,data:i,cache:!1})}}(jQuery,window,document),function(n,t,i,r){"use strict";var u=r.namespace("app");u.Ironmanify=function(){this.$header=n("#headerSection");this.$main=n("main");this.$mainRight=n(".main-right");this.$footer=n("footer");this.$logo=n(".navbar-brand");this.$navbarHeader=n(".navbar-header");this.$addRemoveMembers=n("#addRemoveMembers");this.$teamMembers=n("#teamMembers");this.$logoContainer=n("<div><\/div>");this.className="ironman";this.isSideBySide=!1;this.breakPoint=750};u.Ironmanify.prototype.init=function(){n(t).resize(this.sideBySideHandler.bind(this));n(t).width()<this.breakPoint?this.makeNormal():this.makeSideBySide();n("#OfficePresenceCheckBox").change(function(){this.checked?n("#ConsidOfficeDropDown").removeClass("hide").prop("required",!0):n("#ConsidOfficeDropDown").addClass("hide").prop("required",!1)})};u.Ironmanify.prototype.sideBySideHandler=function(){if(n(t).width()<this.breakPoint){if(!this.isSideBySide)return;this.makeNormal()}else{if(this.isSideBySide)return;this.makeSideBySide()}};u.Ironmanify.prototype.makeNormal=function(){this.$header.removeClass(this.className);this.$main.removeClass(this.className);this.$main.addClass("transparent");this.$main.find(".contactFormComponent").addClass("contactFormComponent-transparent");this.$main.append(this.$mainRight);this.$mainRight.removeClass(this.className);this.$footer.removeClass(this.className);this.$navbarHeader.append(this.$logo);this.$logoContainer.remove();this.$addRemoveMembers.height(this.$addRemoveMembers.find(".big-b").height()+40);this.isSideBySide=!1};u.Ironmanify.prototype.makeSideBySide=function(){this.$header.addClass(this.className);this.$main.addClass(this.className);this.$main.removeClass("transparent");this.$main.find(".contactFormComponent").removeClass("contactFormComponent-transparent");this.$main.after(this.$mainRight);this.$mainRight.addClass(this.className);this.$footer.addClass(this.className);this.$main.first().prepend(this.$logoContainer);this.$logoContainer.append(this.$logo);this.$addRemoveMembers.height(this.$teamMembers.height());this.isSideBySide=!0}}(jQuery,window,document,app),function(n,t,i,r){"use strict";var u=r.namespace("app"),f={};u.TeamSignup=function(t){this.options=n.extend({},f,t);this.$addTeamForm=n("#addTeamForm");this.$addMembersContainer=this.$addTeamForm.find("#teamMembers");this.$addTeamMemberButton=this.$addTeamForm.find("#addTeamMemberButton");this.$removeTeamMemberButton=this.$addTeamForm.find("#removeTeamMemberButton");this.ajaxService=new r.service.Ajax};u.TeamSignup.prototype.init=function(){this.$addTeamMemberButton.click(this.addTeamMemberHandler.bind(this));this.$removeTeamMemberButton.click(this.removeTeamMemberHandler.bind(this));this.options.removeLabels&&this.$addTeamForm.find(".team-member label").remove();this.syncDivHeights()};u.TeamSignup.prototype.addTeamMemberHandler=function(){var t=this.$addMembersContainer.find(".team-member"),i=this.options.addTeamMemberUrl+"?numberOfTeamMembersDisplayed="+t.length;this.ajaxService.getAsync(i).done(function(i){this.$addTeamMemberButton.addClass("hidden");this.$removeTeamMemberButton.removeClass("hidden");this.$addMembersContainer.removeClass("col-md-4");this.$addMembersContainer.addClass("col-md-8");this.$addMembersContainer.append(i);t=this.$addMembersContainer.find(".team-member");t.each(function(){n(this).removeClass("col-md-12");n(this).addClass("col-md-6")});this.options.removeLabels&&this.$addTeamForm.find(".team-member label").remove()}.bind(this)).fail(function(){}.bind(this)).always(function(){}.bind(this))};u.TeamSignup.prototype.removeTeamMemberHandler=function(){var t=this.$addMembersContainer.find(".team-member"),i=t.last();i.remove();this.$addTeamMemberButton.removeClass("hidden");this.$removeTeamMemberButton.addClass("hidden");this.$addMembersContainer.addClass("col-md-4");this.$addMembersContainer.removeClass("col-md-8");t=this.$addMembersContainer.find(".team-member");t.each(function(){n(this).removeClass("col-md-6");n(this).addClass("col-md-12")})};u.TeamSignup.prototype.syncDivHeights=function(){n("#addRemoveMembers").height(this.$addMembersContainer.find(".team-member").height())}}(jQuery,window,document,app),function(n,t,i,r){"use strict";var u=r.namespace("app");u.TeamsPage=function(){this.$recoverApiKeyLink=n(".recoverApiKeyLink");this.$confirmEmailModal=n("#confirmEmailModal");this.$recoverApiKeyButton=this.$confirmEmailModal.find("#recoverApiKeyButton");this.$currentTeam=null;this.ajaxService=new r.service.Ajax};u.TeamsPage.prototype.init=function(){this.$recoverApiKeyLink.click(this.triggerConfirmEmailModal.bind(this));this.$recoverApiKeyButton.click(this.recoverApiKey.bind(this));this.anchorLinkAccordionExpander()};u.TeamsPage.prototype.triggerConfirmEmailModal=function(t){t.preventDefault();t.stopPropagation();this.$confirmEmailModal.modal();this.$currentTeam=n(t.currentTarget)};u.TeamsPage.prototype.recoverApiKey=function(t){t.preventDefault();t.stopPropagation();var i=encodeURIComponent(n("#confirmEmail").val()),r=this.$currentTeam.attr("href")+"&email="+i;this.ajaxService.getAsync(r).done(function(n){this.$currentTeam.parent().text(n)}.bind(this)).fail(function(){}.bind(this)).always(function(){this.$confirmEmailModal.modal("hide")}.bind(this))};u.TeamsPage.prototype.anchorLinkAccordionExpander=function(){var i=t.location.hash.substring(1),r=n("[id='"+i+"']").attr("href");n(r).collapse("show")}}(jQuery,window,document,app),function(n,t,i,r){"use strict";var u=r.namespace("app");u.TeamImages=function(){this.$teamCards=n(".team-card");this.images=["img1.jpg","img2.jpg","img3.jpg","img4.jpg","img5.jpg","img6.jpg","img7.jpg","img8.jpg","img9.jpg","img10.jpg","img11.jpg","img12.jpg","img13.jpg","img14.jpg","img15.jpg","img16.jpg","img17.jpg","img18.jpg","img19.jpg","img20.jpg"]};u.TeamImages.prototype.init=function(){var t=this;n(".team-card").each(function(){var i=n(this).data("target").split("-").slice(-1)[0]%t.images.length;n(this).css({"background-image":"url(images/teams/"+t.images[i]+")"})})}}(jQuery,window,document,app),function(n,t,i,r){"use strict";var u=r.namespace("app"),f={};u.Header=function(t){this.options=n.extend({},f,t);this.$headerSection=n("#headerSection");this.$timerBanner=this.$headerSection.find("#countdown");this.ajaxService=new r.service.Ajax};u.Header.prototype.init=function(){this.$timerBanner.length&&this.createCountdownTimer()};u.Header.prototype.createCountdownTimer=function(){var n=new Date("Nov 8, 2017 17:30:00").getTime(),t=setInterval(function(){var r=(new Date).getTime(),i=n-r,u=Math.floor(i/864e5),f=Math.floor(i%864e5/36e5),e=Math.floor(i%36e5/6e4),o=Math.floor(i%6e4/1e3),s="<h4>"+u+"d "+f+"h "+e+"m "+o+"s <\/h4>";this.$timerBanner.html(s);i<0&&(clearInterval(t),this.$timerBanner.html("Hack time!"))}.bind(this),1e3)}}(jQuery,window,document,app),function(n,t,i,r){"use strict";var u=r.namespace("app"),f={};u.CountDown=function(t){this.options=n.extend({},f,t)};u.CountDown.prototype.init=function(){this.timer=setInterval(this.countDownTick.bind(this),1e3);this.$countDownTimer=n("#count-down");this.endDate=new Date(2018,9,18,17);this.finalTimerStartDate=new Date(2018,9,22,0);this.finalTimerEndDate=new Date(2018,9,25,17);this.everythingIsOverDate=new Date(2018,9,26,8);this.countDownTick()};u.CountDown.prototype.countDownTick=function(){var e=this.endDate-Date.now(),f,r;if(e<0)if(this.finalTimerStartDate-Date.now()<0)if(f=this.finalTimerEndDate-Date.now(),f<0)this.everythingIsOverDate-Date.now()<0?this.$countDownTimer.html("The race is over, <a href='"+this.options.agendaUrl+"'>check out the winner!<\/a>"):this.$countDownTimer.html("<a href='"+this.options.agendaUrl+"'>Let the games begin!<\/a>"),clearInterval(this.timer);else{var n=Math.floor(f/1e3),t=Math.floor(n/60),i=Math.floor(t/60),u=Math.floor(i/24);i%=24;t%=60;n%=60;t<10&&(t="0"+t);n<10&&(n="0"+n);r="";r=u<1?"Race begins in "+i+":"+t+":"+n:"Race begins in "+u+" days and "+i+" hours";this.$countDownTimer.html(r)}else clearInterval(this.timer),this.$countDownTimer.html("The <a href='"+this.options.apiUrl+"'>API<a/> is open good luck!");else{var n=Math.floor(e/1e3),t=Math.floor(n/60),i=Math.floor(t/60),u=Math.floor(i/24);i%=24;t%=60;n%=60;r="";r=u<1?"API opens in "+i+":"+t+":"+n:"API opens in "+u+" days and "+i+" hours";this.$countDownTimer.html(r)}}}(jQuery,window,document,app),function(n,t,i,r){"use strict";var u=r.namespace("app"),f={};u.Highscore=function(t){this.options=n.extend({},f,t);this.$highscoreContainer=n("#highscore");this.ajaxService=new r.service.Ajax};u.Highscore.prototype.init=function(){setInterval(this.reloadHighscore.bind(this),3e4)};u.Highscore.prototype.reloadHighscore=function(){this.ajaxService.getAsync(this.options.getHighscoreUrl).done(function(n){this.$highscoreContainer.html(n)}.bind(this)).fail(function(){}.bind(this)).always(function(){}.bind(this))}}(jQuery,window,document,app);$(".clickTile").on("mouseover",function(){console.log("hi")});$('[data-toggle="popover"]').popover();$("html").on("click",function(n){typeof $(n.target).data("original-title")=="undefined"&&$("[data-original-title]").popover("hide")});(function(n,t,i,r){"use strict";var u=r.namespace("app"),f={gameStates:[],lastLoadedTurn:0,allTurnsLoaded:!1};u.IronManVisualizer=function(t){this.options=n.extend({},f,t);this.ajaxService=new r.service.Ajax};u.IronManVisualizer.prototype.init=function(){this.ajaxService.getAsync(this.options.getReplayUrl,{gameId:this.options.gameId,turn:0,amount:50}).done(function(n){this.options.gameStates=n.gameStates;this.options.lastLoadedTurn=n.gameStates[n.gameStates.length-1].turn;this.game()}.bind(this)).fail(function(){}.bind(this)).always(function(){}.bind(this))};u.IronManVisualizer.prototype.game=function(){function si(){var i,t,n;let f=l[0];s=50;ft=0;pt=f.mapSize;wt=f.mapSize;nr();let o=w[f.map];for(o||(o=w.standardmap),i=new at(o),i.height=h,i.width=h,e.stage.addChild(i),rt=i.width/wt,ut=i.height/pt,t=f.players,r=[],n=0;n<t.length;n++){let i=new PIXI.extras.AnimatedSprite(u["p"+(n+1)+"idle"]);i.anchor.set(.5,.9);let f=d(t[n].xPos,t[n].yPos);i.x=f[0];i.y=f[1];i.xPos=t[n].xPos;i.yPos=t[n].yPos;i.oldX=t[n].xPos;i.oldY=t[n].yPos;i.status=t[n].status;i.oldStatus="";i.vx=0;i.vy=0;i.play();i.animationSpeed=.1;e.stage.addChild(i);r[n]=i}ti();b=[];ii();k=[];ri();a=st;e.ticker.add(n=>pi(n))}function ot(n){c.text=n;c.alpha=1;e.stage.addChild(c);e.ticker.add(kt)}function dt(){a=gt;y=new PIXI.Text("PAUSE",et);y.x=h/2-y.width/2;y.y=h/2-y.height/2;e.stage.addChild(y)}function yi(){a=st;e.stage.removeChild(y)}function pi(n){a(n)}function st(n){ft+=n;ft>=s?(ft-=s,f.turn<nt&&v>0||f.turn>0&&v<0?(f=l.find(n=>n.turn===f.turn+v),ki(),bi(),gi(),ti(),ii(),ri(),!ct&&nt-f.turn<20&&tr()):ct&&v>0?(wi(f),a=ni):(dt(),v=1)):di(n)}function gt(){}function ni(){}function wi(n){var r=n.standing,i="",t;if(r===null)i="GAME PAUSED\nNO MORE GAME STATES, PLEASE COMPLETE GAME";else for(i+="RESULTS\n",t=0;t<r.length;t++)i+=t+1+": "+r[t]+"\n";p=new PIXI.Text(i,et);p.x=h/2-p.width/2;p.y=h/2-p.height/2;e.stage.addChild(p)}function bi(){var t=f.players;for(let r=0;r<t.length;r++){let u=n("#player-"+r),e=t[r].stamina,o=u.find(".stamina-fill");o.innerWidth(e+"%");for(let f=0;f<3;f++){let o=u.find(".powerup-container-"+f);o.find(".powerup-picture").remove();let e=t[r].powerupInventory[f];if(typeof e!="undefined"){let h="images/IronManVisualizer/Powerups/"+e+".png",s=i.createElement("img");n(s).bind("error",function(){n(this).attr("src","images/IronManVisualizer/Powerups/Potion.png")}).attr("src",h).addClass("powerup-picture").prop("title",e);o.append(s)}}let f=u.find(".active-powerups-container");f.children(".active-powerup-picture").remove();for(let u=0;u<t[r].activePowerups.length;u++){let e=t[r].activePowerups[u].name,s="images/IronManVisualizer/Powerups/"+e+".png",o=i.createElement("img");n(o).bind("error",function(){n(this).attr("src","images/IronManVisualizer/Powerups/Default.png")}).attr("src",s).addClass("active-powerup-picture").prop("title",e);f.append(o)}}}function ki(){var i=f.message,t;if(i!==null){let r=n("#event-feed");for(t=0;t<i.length;t++)r.append("<p>"+f.turn+": "+i[t]+"<\/p>");r.animate({scrollTop:r.prop("scrollHeight")-r.height()},100)}}function di(n){for(let t=0;t<r.length;t++)r[t].x+=r[t].vx*n,r[t].y+=r[t].vy*n}function gi(){let n=f.players;for(let t=0;t<n.length;t++){let u=n[t].xPos,f=n[t].yPos;r[t].oldX=r[t].xPos;r[t].oldY=r[t].yPos;r[t].xPos=u;r[t].yPos=f;r[t].oldStatus=r[t].status;r[t].status=n[t].status;let i=d(r[t].oldX,r[t].oldY);r[t].x=i[0];r[t].y=i[1];let e=d(u,f);r[t].vx=(e[0]-i[0])/s;r[t].vy=(e[1]-i[1])/s}}function ti(){var n=f.players;for(let t=0;t<n.length;t++){let i="p"+(t+1);if(r[t].oldStatus!==r[t].status&&(r[t].scale.x/=Math.abs(r[t].scale.x),r[t].scale.y/=Math.abs(r[t].scale.y),r[t].anchor.set(.5,.9)),r[t].rotation=0,r[t].xPos<r[t].oldX?r[t].scale.x=Math.abs(r[t].scale.x)*-1:r[t].xPos>r[t].oldX&&(r[t].scale.x=Math.abs(r[t].scale.x)),["swimming"].includes(r[t].status)&&(r[t].yPos<r[t].oldY?r[t].rotation=1.5:r[t].yPos>r[t].oldY&&(r[t].rotation=-1.5),r[t].scale.x>0&&(r[t].rotation*=-1)),r[t].oldStatus!==r[t].status)switch(n[t].status){case"biking":i+="bike";r[t].scale.x*=.5;r[t].scale.y*=.5;break;case"swimming":i+="swim";r[t].scale.x*=.8;r[t].scale.y*=.8;r[t].anchor.set(.5,.5);break;case"running":i+="run";break;case"stunned":i+="stun";break;case"exhausted":i+="exhausted";break;case"resting":i+="rest";break;case"done":i+="win";break;default:i+="idle"}["exhausted","stunned","resting"].includes(r[t].status)&&(r[t].oldStatus==="swimming"?(i+="swim",r[t].scale.x*=.8,r[t].scale.y*=.8,r[t].anchor.set(.5,.5)):r[t].oldStatus==="biking"&&(i+="bike",r[t].scale.x*=.5,r[t].scale.y*=.5));r[t].status!==r[t].oldStatus&&(r[t].textures=u[i],r[t].play())}}function ii(){var i,n,t;for(let n=0;n<b.length;n++)b[n].destroy();b=[];i=new PIXI.filters.GlowFilter(10,2,0,16043586,.1);n=f.powerup;for(let i=0;i<n.length;i++){let u=w[n[i].name+".png"],r;typeof u!="undefined"?r=new at(u):(r=new PIXI.extras.AnimatedSprite(bt),r.animationSpeed=.08,r.play());r.scale.set(.7,.7);r.anchor.set(.5,.5);t=d(n[i].xPos,n[i].yPos);r.x=t[0];r.y=t[1];e.stage.addChildAt(r,1);b.push(r)}}function o(n,t){var i=[];for(let r=0;r<t;r++){let t=r<10?"0"+r:r;i.push(w[n+t+".png"])}return i}function nr(){u={};for(var n=0;n<4;n++){let t=n+1;t===2&&(t=5);let i="player"+t,f=o(i+"run",4),e=o(i+"swim",23),s=o(i+"bike",6),h=o(i+"jump",2),c=o(i+"stunned",4),l=o(i+"bikestunned",4),a=o(i+"swimstunned",4),v=o(i+"exhausted",4),y=o(i+"bikeexhausted",4),p=o(i+"swimexhausted",4),r=o(i+"resting",4),w=o(i+"bikeresting",4),b=o(i+"swimresting",4);t===5&&(t=2);u["p"+t+"idle"]=r;u["p"+t+"run"]=f;u["p"+t+"swim"]=e;u["p"+t+"bike"]=s;u["p"+t+"win"]=h;u["p"+t+"stun"]=c;u["p"+t+"stunbike"]=l;u["p"+t+"stunswim"]=a;u["p"+t+"exhausted"]=v;u["p"+t+"exhaustedbike"]=y;u["p"+t+"exhaustedswim"]=p;u["p"+t+"rest"]=r;u["p"+t+"restbike"]=w;u["p"+t+"restswim"]=b}bt=o("powerup",10)}function ri(){let n=f.weather;for(let n=0;n<k.length;n++)k[n].destroy();k=[];let t=w["cloud.png"];for(let i=0;i<n.length;i++){let r=new at(t);r.scale.x=1*rt/r.width;r.scale.y=1*ut/r.height;r.anchor.set(.5,.5);let u=d(n[i].item2,n[i].item1);r.x=u[0];r.y=u[1];r.alpha=.6;k.push(r);e.stage.addChild(r)}}function d(n,t){return[n*rt+rt/2,t*ut+ut/2]}function ui(){var t,i,r;if(typeof vt!="undefined"){t=vt.width();i=vt.width()/oi;e.view.style.width=t+"px";e.view.style.height=i+"px";r=f.players;for(let t=0;t<r.length;t++){let i=n("#player-"+t);for(let t=0;t<3;t++){let i=n(".powerup-container-"+t);i.innerHeight(i.find(".powerup-box").height())}}}}function tr(){ht||(ht=!0,lt.ajaxService.getAsync(lt.options.getReplayUrl,{gameId:lt.options.gameId,turn:nt,amount:10}).done(function(n){n.gameStates?(l=l.concat(n.gameStates),nt=l[l.length-1].turn,ht=!1):ct=!0}.bind(this)).fail(function(){}.bind(this)).always(function(){}.bind(this)))}function g(n){let i={};return i.code=n,i.isDown=!1,i.isUp=!0,i.press=undefined,i.release=undefined,i.downHandler=n=>{n.keyCode===i.code&&(i.isUp&&i.press&&i.press(),i.isDown=!0,i.isUp=!1),n.preventDefault()},i.upHandler=n=>{n.keyCode===i.code&&(i.isDown&&i.release&&i.release(),i.isDown=!1,i.isUp=!0),n.preventDefault()},t.addEventListener("keydown",i.downHandler.bind(i),!1),t.addEventListener("keyup",i.upHandler.bind(i),!1),i}var l=this.options.gameStates,f=l[0],nt=this.options.lastLoadedTurn,ct=this.options.allTurnsLoaded,lt=this,r,pt,wt,rt,ut,a,s,ft,u,bt,b,k,et,c,kt,y,p,ht;if(!(l.length<1)){var fi=PIXI.Application,ir=PIXI.Container,ei=PIXI.loader,rr=PIXI.loader.resources,w=PIXI.utils.TextureCache,at=PIXI.Sprite,ur=PIXI.Rectangle,fr=PIXI.filters,yt=10,tt=50,v=1,h=1024,vt=n("#pixi-parent-container"),it=[h,h],oi=it[0]/it[1],e=new fi({width:it[0],height:it[1],antialias:!0,transparent:!1,resolution:1});i.getElementById("pixiDiv").appendChild(e.view);ui();ei.add("ironman","images/IronManVisualizer/ironman.json").add("watermap","images/IronManVisualizer/watermap.png").add("roadmap","images/IronManVisualizer/roadmap.png").add("trailmap","images/IronmanVisualizer/trailmap.png").add("standardmap","images/IronManVisualizer/test.png").add("zurichmap","images/IronManVisualizer/zurich.png").add("jonkopingmap","images/IronManVisualizer/jonkoping1.png").add("southafricamap","images/IronManVisualizer/southafrica.png").add("australiamap","images/IronManVisualizer/austraila1.png").add("hawaiimap","images/IronManVisualizer/hawaii.png").add("kalmarmap","images/IronManVisualizer/kalmar1.png").load(si);et=new PIXI.TextStyle({fontFamily:"Arial",fontSize:36,fontStyle:"italic",fontWeight:"bold",fill:["#ffffff","#ff0000"],stroke:"#4a1850",strokeThickness:5,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:4,dropShadowAngle:Math.PI/6,dropShadowDistance:6,wordWrap:!0,wordWrapWidth:440,align:"center"});let hi=g(37),ci=g(39),li=g(38),ai=g(40),vi=g(32);c=new PIXI.Text("",et);c.x=h/2-c.width/2;c.y=h/2-c.height/2;kt=function(){c.alpha-=.01;c.alpha<=0&&this.destroy()};hi.press=()=>{s+=10;s>tt&&(s=tt);var n=(tt/s).toFixed(2);n+=" X";ot(n)};ci.press=()=>{s-=10;s<yt&&(s=yt);var n=(tt/s).toFixed(2);n+=" X";ot(n)};ai.press=()=>{v=-1,ot("<<")};li.press=()=>{v=1,ot(">>")};vi.press=()=>{a===st?dt():a===gt?yi():a===ni&&(v=-1,e.stage.removeChild(p),a=st)};t.onresize=function(){ui()};ht=!1}}})(jQuery,window,document,app),function(n,t,i,r){"use strict";var u=r.namespace("app"),f={};u.Highscore=function(t){this.options=n.extend({},f,t);this.$highscoreContainer=n("#highscore");this.ajaxService=new r.service.Ajax};u.Highscore.prototype.init=function(){setInterval(this.reloadHighscore.bind(this),3e4)};u.Highscore.prototype.reloadHighscore=function(){this.ajaxService.getAsync(this.options.getHighscoreUrl).done(function(n){this.$highscoreContainer.html(n)}.bind(this)).fail(function(){}.bind(this)).always(function(){}.bind(this))}}(jQuery,window,document,app),function(n,t,i,r){"use strict";var u=r.namespace("app"),f={initialMatches:[]};u.Agenda=function(t){this.options=n.extend({},f,t)};u.Agenda.prototype.init=function(){var i=this.options.initialMatches,u;if(i.length!==0){var l=this.options.replayLink,f=Math.max.apply(Math,i.map(function(n){return n.round})),r=i.filter(n=>n.round===f),e,o,s=0;for(u=0;u<i.length;u++)i[u].round===f-1&&(s%2==0?(i[u].nextMatch="leftFinal",s++):(i[u].nextMatch="rightFinal",s++)),i[u].round===f&&i.splice(u,1);r[0].teams===null?(e={gameId:"rightFinal",teams:null,round:r[0].round,result:r[0].result.slice(0,2)},o={gameId:"leftFinal",teams:null,round:r[0].round,result:r[0].result.slice(2,5)}):(e={gameId:"rightFinal",teams:r[0].teams.slice(0,2),round:r[0].round,result:r[0].result.slice(0,2)},o={gameId:"leftFinal",teams:r[0].teams.slice(2,5),round:r[0].round,result:r[0].result.slice(2,5)});var h=this.giveListFromFirstMatch(e,i,f),c=this.giveListFromFirstMatch(o,i,f),a=this.giveListOfTeam(h),v=this.giveListOfTeam(c),y=this.giveListOfResult(h),p=this.giveListOfResult(c),w={teams:v,results:p},b={teams:a,results:y};n(function(){var u,f,e;for(n("div#leftBracket").bracket({init:w,skipConsolationRound:!0,teamWidth:100,matchMargin:15,roundMargin:20,scoreWidth:20}),n("div#rightBracket").bracket({init:b,skipConsolationRound:!0,dir:"rl",teamWidth:100,matchMargin:15,roundMargin:20,scoreWidth:20}),u=0;u<i.length;u++)if(f=i[u].gameId==="leftFinal"||i[u].gameId==="rightFinal"?r[0].game:i[u].gameId,i[u].teams!==null){e=n(".match").filter(function(){var t=n(this).find(".label");return(t.first().text()===i[u].teams[0]||t.first().text()===i[u].teams[1])&&(t.last().text()===i[u].teams[0]||t.last().text()===i[u].teams[1])});e.popover({container:"body",title:"GameId",placement:"bottom",html:!0,content:"<a href='"+l+"?gameId="+f+"'>"+f+"<\/a>"}).on("click",function(n){if(n.target!==this){n.stopPropagation();return}})}n(".bracket .bubble").each(function(){var r=n(this).parents(".bracket"),t=n(this).parent(".team"),i=t.find(".score").html();i==="2"?(this.innerHTML="2nd",r.find(".highlightWinner").each(function(){n(this).removeClass("highlightWinner").addClass("highlightLoser")}),r.find(".win[data-teamid='"+n(this).data("teamid")+"']").each(function(){n(this).removeClass("win").addClass("lose")})):i==="1"?(this.innerHTML="3rd",n(this).addClass("third"),t.addClass("win")):i==="0"&&(this.innerHTML="4th",n(this).addClass("fourth"),t.removeClass("highlightLoser"))});n(t).resize(function(){n("#rightBracket").css("maxWidth",n(t).width()/2)})})}};u.Agenda.prototype.giveListFromFirstMatch=function(n,t,i){for(var f,e,h,u,o,s,l,r=[],c=0;c<i+1;c++)r[c]=[];for(r[i].push(n),f=i-1;f>=0;f--)for(e=0;e<t.length;e++)if(t[e].round===f)for(h=0;h<r[f+1].length;h++)r[f+1][h].gameId===t[e].nextMatch&&r[f].push(t[e]);for(u=i-1;u>=1;u--)for(o=0;o<r[u].length;o++)for(s=0;s<r[u-1].length;s++)r[u-1][s].nextMatch===r[u][o].gameId&&(l=r[u-1].splice(s,1),r[u-1].splice(o*2,0,l[0]));return r};u.Agenda.prototype.giveListOfTeam=function(n){for(var i=[],t=0;t<n[0].length;t++)i.push(n[0][t].teams);return i};u.Agenda.prototype.giveListOfResult=function(n){for(var i,r=[],t=0;t<n.length;t++)for(r[t]=[],i=0;i<n[t].length;i++)r[t][i]=n[t][i].result;return r}}(jQuery,window,document,app),function(n,t,i,r){"use strict";var u=r.namespace("app"),f={};u.IronManHighscore=function(t){this.options=n.extend({},f,t);this.$highscoreContainer=n("#highscore-list");this.ajaxService=new r.service.Ajax};u.IronManHighscore.prototype.init=function(){setInterval(this.reloadHighscore.bind(this),3e4)};u.IronManHighscore.prototype.reloadHighscore=function(){this.ajaxService.getAsync(this.options.getHighscoreUrl).done(function(t){n(".popover").each(function(){n(this).popover("hide")});this.$highscoreContainer.html(t)}.bind(this)).fail(function(){}.bind(this)).always(function(){n("[data-toggle=popover]").popover({html:!0});console.log("reload")}.bind(this))}}(jQuery,window,document,app);